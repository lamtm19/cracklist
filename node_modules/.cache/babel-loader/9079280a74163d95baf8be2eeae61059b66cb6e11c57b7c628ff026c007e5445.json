{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lamtm\\\\Downloads\\\\cracklist-web\\\\src\\\\components\\\\Game.js\",\n  _s = $RefreshSig$();\n// src/components/Game.js\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { db } from '../firebase';\nimport { collection, doc, getDoc, onSnapshot, updateDoc, arrayUnion } from 'firebase/firestore';\nimport VotePanel from './VotePanel';\nimport ThemeSelector from './ThemeSelector';\nimport CurrentTheme from './CurrentTheme';\nimport WinnerPanel from './WinnerPanel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Game({\n  pseudo\n}) {\n  _s();\n  const {\n    code: gameCode\n  } = useParams();\n  const [joueurs, setJoueurs] = useState([]);\n  const [monPaquet, setMonPaquet] = useState([]);\n  const [monTour, setMonTour] = useState(false);\n  const [sens, setSens] = useState(1); // 1 = horaire\n  const [joueurActif, setJoueurActif] = useState('');\n  const [themeActuel, setThemeActuel] = useState(null);\n  const [votePhase, setVotePhase] = useState(false);\n  const [timer, setTimer] = useState(15);\n  const [resultatVote, setResultatVote] = useState(null);\n  const [showThemeSelector, setShowThemeSelector] = useState(false);\n  const cartesInitiales = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'JOKER', 'PASS', 'REVERSE', 'CRAKITOKO'];\n\n  // Donne 8 cartes aléatoires au joueur au début\n  useEffect(() => {\n    const distribuerCartes = async () => {\n      const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\n      const snap = await getDoc(joueurRef);\n      const data = snap.data();\n      if (!data || data.cartes.length === 0) {\n        const paquet = Array.from({\n          length: 8\n        }, () => cartesInitiales[Math.floor(Math.random() * cartesInitiales.length)]);\n        await updateDoc(joueurRef, {\n          cartes: paquet\n        });\n        setMonPaquet(paquet);\n      } else {\n        setMonPaquet(data.cartes);\n      }\n    };\n    distribuerCartes();\n  }, [gameCode, pseudo]);\n\n  // Écoute des joueurs et de l’ordre\n  useEffect(() => {\n    const unsub = onSnapshot(collection(db, \"games\", gameCode, \"players\"), snap => {\n      const list = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      setJoueurs(list);\n      const noms = list.map(j => j.pseudo);\n      const indexActuel = noms.indexOf(joueurActif);\n      const monIndex = noms.indexOf(pseudo);\n\n      // Détection de mon tour\n      if (joueurActif && noms.length > 1) {\n        setMonTour(noms[indexActuel] === noms[monIndex]);\n      }\n    });\n    return () => unsub();\n  }, [gameCode, joueurActif, pseudo]);\n\n  // Timer 15 secondes\n  useEffect(() => {\n    if (!monTour || votePhase) return;\n    setTimer(15);\n    const interval = setInterval(() => {\n      setTimer(t => {\n        if (t <= 1) {\n          handleTempsEcoule();\n          clearInterval(interval);\n        }\n        return t - 1;\n      });\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [monTour, votePhase]);\n  const handleTempsEcoule = () => {\n    const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\n    updateDoc(joueurRef, {\n      cartes: arrayUnion(cartesInitiales[Math.floor(Math.random() * cartesInitiales.length)])\n    });\n    passerAuSuivant();\n  };\n  const passerAuSuivant = () => {\n    const noms = joueurs.map(j => j.pseudo);\n    const index = noms.indexOf(joueurActif);\n    let nextIndex = (index + sens + noms.length) % noms.length;\n    setJoueurActif(noms[nextIndex]);\n  };\n  const jouerCarte = async carte => {\n    const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\n    const nouvellesCartes = monPaquet.filter(c => c !== carte);\n    await updateDoc(joueurRef, {\n      cartes: nouvellesCartes\n    });\n    setMonPaquet(nouvellesCartes);\n    if (carte === 'PASS') {\n      passerAuSuivant(); // saute un joueur\n      passerAuSuivant();\n    } else if (carte === 'REVERSE') {\n      setSens(s => -s);\n      passerAuSuivant();\n    } else if (carte === 'CRAKITOKO') {\n      setShowThemeSelector(true);\n    } else if (carte === 'JOKER') {\n      setVotePhase(true);\n    } else {\n      setVotePhase(true);\n    }\n    if (nouvellesCartes.length === 0) {\n      await updateDoc(joueurRef, {\n        out: true\n      });\n    }\n  };\n  const handleVoteResult = resultat => {\n    setVotePhase(false);\n    setResultatVote(resultat);\n    if (resultat === 'validé') {\n      passerAuSuivant();\n    } else {\n      const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\n      const nouvelle = cartesInitiales[Math.floor(Math.random() * cartesInitiales.length)];\n      updateDoc(joueurRef, {\n        cartes: arrayUnion(nouvelle)\n      });\n    }\n  };\n  const handleThemeSelection = theme => {\n    setThemeActuel(theme);\n    setShowThemeSelector(false);\n    passerAuSuivant();\n  };\n  const winners = joueurs.filter(j => j.out);\n  const partieTerminee = joueurs.length > 0 && winners.length === joueurs.length;\n  if (partieTerminee) {\n    return /*#__PURE__*/_jsxDEV(WinnerPanel, {\n      winners: winners.map(w => w.pseudo)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\uD83C\\uDFAE Partie : \", gameCode]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Tu es : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: pseudo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Joueur actif : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: joueurActif\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CurrentTheme, {\n      theme: themeActuel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), monTour && !votePhase && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u23F3 Temps : \", timer, \"s\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 33\n    }, this), resultatVote && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"R\\xE9sultat du vote pr\\xE9c\\xE9dent : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: resultatVote\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\uD83C\\uDCCF Tes cartes :\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: 10\n      },\n      children: monTour && !votePhase ? monPaquet.map((carte, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => jouerCarte(carte),\n        children: carte\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }, this)) : monPaquet.map((carte, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          padding: '6px 12px',\n          backgroundColor: '#eee',\n          borderRadius: 4\n        },\n        children: carte\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), showThemeSelector && /*#__PURE__*/_jsxDEV(ThemeSelector, {\n      onSelect: handleThemeSelection\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }, this), votePhase && !showThemeSelector && /*#__PURE__*/_jsxDEV(VotePanel, {\n      pseudoJoueurActif: joueurActif,\n      onVoteResult: handleVoteResult,\n      isMyTurn: monTour\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n}\n_s(Game, \"7jGOvPoimDqiBMJ5rxYwbeb0OpM=\", false, function () {\n  return [useParams];\n});\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useState","useParams","db","collection","doc","getDoc","onSnapshot","updateDoc","arrayUnion","VotePanel","ThemeSelector","CurrentTheme","WinnerPanel","jsxDEV","_jsxDEV","Game","pseudo","_s","code","gameCode","joueurs","setJoueurs","monPaquet","setMonPaquet","monTour","setMonTour","sens","setSens","joueurActif","setJoueurActif","themeActuel","setThemeActuel","votePhase","setVotePhase","timer","setTimer","resultatVote","setResultatVote","showThemeSelector","setShowThemeSelector","cartesInitiales","distribuerCartes","joueurRef","snap","data","cartes","length","paquet","Array","from","Math","floor","random","unsub","list","docs","map","d","id","noms","j","indexActuel","indexOf","monIndex","interval","setInterval","t","handleTempsEcoule","clearInterval","passerAuSuivant","index","nextIndex","jouerCarte","carte","nouvellesCartes","filter","c","s","out","handleVoteResult","resultat","nouvelle","handleThemeSelection","theme","winners","partieTerminee","w","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","children","display","flexWrap","gap","i","onClick","backgroundColor","borderRadius","onSelect","pseudoJoueurActif","onVoteResult","isMyTurn","_c","$RefreshReg$"],"sources":["C:/Users/lamtm/Downloads/cracklist-web/src/components/Game.js"],"sourcesContent":["// src/components/Game.js\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { db } from '../firebase';\r\nimport {\r\n  collection, doc, getDoc, onSnapshot, updateDoc, arrayUnion\r\n} from 'firebase/firestore';\r\nimport VotePanel from './VotePanel';\r\nimport ThemeSelector from './ThemeSelector';\r\nimport CurrentTheme from './CurrentTheme';\r\nimport WinnerPanel from './WinnerPanel';\r\n\r\nfunction Game({ pseudo }) {\r\n  const { code: gameCode } = useParams();\r\n  const [joueurs, setJoueurs] = useState([]);\r\n  const [monPaquet, setMonPaquet] = useState([]);\r\n  const [monTour, setMonTour] = useState(false);\r\n  const [sens, setSens] = useState(1); // 1 = horaire\r\n  const [joueurActif, setJoueurActif] = useState('');\r\n  const [themeActuel, setThemeActuel] = useState(null);\r\n  const [votePhase, setVotePhase] = useState(false);\r\n  const [timer, setTimer] = useState(15);\r\n  const [resultatVote, setResultatVote] = useState(null);\r\n  const [showThemeSelector, setShowThemeSelector] = useState(false);\r\n\r\n  const cartesInitiales = [\r\n    'A', 'B', 'C', 'D', 'E', 'F', 'G',\r\n    'JOKER', 'PASS', 'REVERSE', 'CRAKITOKO'\r\n  ];\r\n\r\n  // Donne 8 cartes aléatoires au joueur au début\r\n  useEffect(() => {\r\n    const distribuerCartes = async () => {\r\n      const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\r\n      const snap = await getDoc(joueurRef);\r\n      const data = snap.data();\r\n\r\n      if (!data || data.cartes.length === 0) {\r\n        const paquet = Array.from({ length: 8 }, () =>\r\n          cartesInitiales[Math.floor(Math.random() * cartesInitiales.length)]\r\n        );\r\n        await updateDoc(joueurRef, { cartes: paquet });\r\n        setMonPaquet(paquet);\r\n      } else {\r\n        setMonPaquet(data.cartes);\r\n      }\r\n    };\r\n    distribuerCartes();\r\n  }, [gameCode, pseudo]);\r\n\r\n  // Écoute des joueurs et de l’ordre\r\n  useEffect(() => {\r\n    const unsub = onSnapshot(collection(db, \"games\", gameCode, \"players\"), (snap) => {\r\n      const list = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n      setJoueurs(list);\r\n\r\n      const noms = list.map(j => j.pseudo);\r\n      const indexActuel = noms.indexOf(joueurActif);\r\n      const monIndex = noms.indexOf(pseudo);\r\n\r\n      // Détection de mon tour\r\n      if (joueurActif && noms.length > 1) {\r\n        setMonTour(noms[indexActuel] === noms[monIndex]);\r\n      }\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [gameCode, joueurActif, pseudo]);\r\n\r\n  // Timer 15 secondes\r\n  useEffect(() => {\r\n    if (!monTour || votePhase) return;\r\n    setTimer(15);\r\n    const interval = setInterval(() => {\r\n      setTimer(t => {\r\n        if (t <= 1) {\r\n          handleTempsEcoule();\r\n          clearInterval(interval);\r\n        }\r\n        return t - 1;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  }, [monTour, votePhase]);\r\n\r\n  const handleTempsEcoule = () => {\r\n    const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\r\n    updateDoc(joueurRef, {\r\n      cartes: arrayUnion(cartesInitiales[Math.floor(Math.random() * cartesInitiales.length)])\r\n    });\r\n    passerAuSuivant();\r\n  };\r\n\r\n  const passerAuSuivant = () => {\r\n    const noms = joueurs.map(j => j.pseudo);\r\n    const index = noms.indexOf(joueurActif);\r\n    let nextIndex = (index + sens + noms.length) % noms.length;\r\n    setJoueurActif(noms[nextIndex]);\r\n  };\r\n\r\n  const jouerCarte = async (carte) => {\r\n    const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\r\n    const nouvellesCartes = monPaquet.filter(c => c !== carte);\r\n    await updateDoc(joueurRef, { cartes: nouvellesCartes });\r\n    setMonPaquet(nouvellesCartes);\r\n\r\n    if (carte === 'PASS') {\r\n      passerAuSuivant(); // saute un joueur\r\n      passerAuSuivant();\r\n    } else if (carte === 'REVERSE') {\r\n      setSens(s => -s);\r\n      passerAuSuivant();\r\n    } else if (carte === 'CRAKITOKO') {\r\n      setShowThemeSelector(true);\r\n    } else if (carte === 'JOKER') {\r\n      setVotePhase(true);\r\n    } else {\r\n      setVotePhase(true);\r\n    }\r\n\r\n    if (nouvellesCartes.length === 0) {\r\n      await updateDoc(joueurRef, { out: true });\r\n    }\r\n  };\r\n\r\n  const handleVoteResult = (resultat) => {\r\n    setVotePhase(false);\r\n    setResultatVote(resultat);\r\n\r\n    if (resultat === 'validé') {\r\n      passerAuSuivant();\r\n    } else {\r\n      const joueurRef = doc(db, \"games\", gameCode, \"players\", pseudo);\r\n      const nouvelle = cartesInitiales[Math.floor(Math.random() * cartesInitiales.length)];\r\n      updateDoc(joueurRef, {\r\n        cartes: arrayUnion(nouvelle)\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleThemeSelection = (theme) => {\r\n    setThemeActuel(theme);\r\n    setShowThemeSelector(false);\r\n    passerAuSuivant();\r\n  };\r\n\r\n  const winners = joueurs.filter(j => j.out);\r\n  const partieTerminee = joueurs.length > 0 && winners.length === joueurs.length;\r\n\r\n  if (partieTerminee) {\r\n    return <WinnerPanel winners={winners.map(w => w.pseudo)} />;\r\n  }\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h2>🎮 Partie : {gameCode}</h2>\r\n      <p>Tu es : <strong>{pseudo}</strong></p>\r\n      <p>Joueur actif : <strong>{joueurActif}</strong></p>\r\n\r\n      <CurrentTheme theme={themeActuel} />\r\n\r\n      {monTour && !votePhase && <p>⏳ Temps : {timer}s</p>}\r\n      {resultatVote && <p>Résultat du vote précédent : <strong>{resultatVote}</strong></p>}\r\n\r\n      <h3>🃏 Tes cartes :</h3>\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: 10 }}>\r\n        {monTour && !votePhase ? (\r\n          monPaquet.map((carte, i) => (\r\n            <button key={i} onClick={() => jouerCarte(carte)}>\r\n              {carte}\r\n            </button>\r\n          ))\r\n        ) : (\r\n          monPaquet.map((carte, i) => (\r\n            <span key={i} style={{ padding: '6px 12px', backgroundColor: '#eee', borderRadius: 4 }}>\r\n              {carte}\r\n            </span>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {showThemeSelector && (\r\n        <ThemeSelector onSelect={handleThemeSelection} />\r\n      )}\r\n\r\n      {votePhase && !showThemeSelector && (\r\n        <VotePanel pseudoJoueurActif={joueurActif} onVoteResult={handleVoteResult} isMyTurn={monTour} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}