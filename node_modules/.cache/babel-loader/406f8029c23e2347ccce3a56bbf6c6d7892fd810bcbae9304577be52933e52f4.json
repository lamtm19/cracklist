{"ast":null,"code":"import React,{useState,useEffect}from'react';import{onSnapshot,doc}from'firebase/firestore';import{db}from'./firebase';import Home from'./components/Home';import Lobby from'./components/Lobby';import Game from'./components/Game';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[gameState,setGameState]=useState('home');// 'home', 'lobby', 'game'\nconst[roomCode,setRoomCode]=useState('');const[playerName,setPlayerName]=useState('');const[playerId,setPlayerId]=useState('');const[roomData,setRoomData]=useState(null);useEffect(()=>{if(roomCode&&gameState!=='home'){console.log('ðŸŽ¯ App - Surveillance room:',roomCode);const unsubscribe=onSnapshot(doc(db,'rooms',roomCode),doc=>{console.log('ðŸ“¡ App - Snapshot reÃ§u, existe:',doc.exists());if(doc.exists()){const data=doc.data();console.log('ðŸ“Š App - DonnÃ©es snapshot:',data);setRoomData(data);// DÃ©terminer l'Ã©tat du jeu\nif(data.gameStarted){console.log('ðŸŽ® App - Passage en mode game');setGameState('game');}else{console.log('ðŸ  App - Passage en mode lobby');setGameState('lobby');}}else{// La room n'existe plus, retour Ã  l'accueil\nconsole.log('âŒ App - Room supprimÃ©e, retour accueil');setGameState('home');setRoomCode('');setRoomData(null);}});return()=>unsubscribe();}},[roomCode,gameState]);const handleJoinRoom=(code,name,id)=>{setRoomCode(code);setPlayerName(name);setPlayerId(id);setGameState('lobby');};const handleLeaveRoom=()=>{setGameState('home');setRoomCode('');setPlayerName('');setPlayerId('');setRoomData(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[gameState==='home'&&/*#__PURE__*/_jsx(Home,{onJoinRoom:handleJoinRoom}),gameState==='lobby'&&/*#__PURE__*/_jsx(Lobby,{roomCode:roomCode,playerName:playerName,playerId:playerId,roomData:roomData,onLeaveRoom:handleLeaveRoom}),gameState==='game'&&/*#__PURE__*/_jsx(Game,{roomCode:roomCode,playerName:playerName,playerId:playerId,roomData:roomData,onLeaveRoom:handleLeaveRoom})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","onSnapshot","doc","db","Home","Lobby","Game","jsx","_jsx","jsxs","_jsxs","App","gameState","setGameState","roomCode","setRoomCode","playerName","setPlayerName","playerId","setPlayerId","roomData","setRoomData","console","log","unsubscribe","exists","data","gameStarted","handleJoinRoom","code","name","id","handleLeaveRoom","className","children","onJoinRoom","onLeaveRoom"],"sources":["C:/Users/lamtm/Downloads/cracklist-web/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { onSnapshot, doc } from 'firebase/firestore';\nimport { db } from './firebase';\nimport Home from './components/Home';\nimport Lobby from './components/Lobby';\nimport Game from './components/Game';\nimport './App.css';\n\nfunction App() {\n  const [gameState, setGameState] = useState('home'); // 'home', 'lobby', 'game'\n  const [roomCode, setRoomCode] = useState('');\n  const [playerName, setPlayerName] = useState('');\n  const [playerId, setPlayerId] = useState('');\n  const [roomData, setRoomData] = useState(null);\n\n  useEffect(() => {\n    if (roomCode && gameState !== 'home') {\n      console.log('ðŸŽ¯ App - Surveillance room:', roomCode);\n      const unsubscribe = onSnapshot(doc(db, 'rooms', roomCode), (doc) => {\n        console.log('ðŸ“¡ App - Snapshot reÃ§u, existe:', doc.exists());\n        if (doc.exists()) {\n          const data = doc.data();\n          console.log('ðŸ“Š App - DonnÃ©es snapshot:', data);\n          setRoomData(data);\n          \n          // DÃ©terminer l'Ã©tat du jeu\n          if (data.gameStarted) {\n            console.log('ðŸŽ® App - Passage en mode game');\n            setGameState('game');\n          } else {\n            console.log('ðŸ  App - Passage en mode lobby');\n            setGameState('lobby');\n          }\n        } else {\n          // La room n'existe plus, retour Ã  l'accueil\n          console.log('âŒ App - Room supprimÃ©e, retour accueil');\n          setGameState('home');\n          setRoomCode('');\n          setRoomData(null);\n        }\n      });\n\n      return () => unsubscribe();\n    }\n  }, [roomCode, gameState]);\n\n  const handleJoinRoom = (code, name, id) => {\n    setRoomCode(code);\n    setPlayerName(name);\n    setPlayerId(id);\n    setGameState('lobby');\n  };\n\n  const handleLeaveRoom = () => {\n    setGameState('home');\n    setRoomCode('');\n    setPlayerName('');\n    setPlayerId('');\n    setRoomData(null);\n  };\n\n  return (\n    <div className=\"App\">\n      {gameState === 'home' && (\n        <Home onJoinRoom={handleJoinRoom} />\n      )}\n      \n      {gameState === 'lobby' && (\n        <Lobby \n          roomCode={roomCode}\n          playerName={playerName}\n          playerId={playerId}\n          roomData={roomData}\n          onLeaveRoom={handleLeaveRoom}\n        />\n      )}\n      \n      {gameState === 'game' && (\n        <Game \n          roomCode={roomCode}\n          playerName={playerName}\n          playerId={playerId}\n          roomData={roomData}\n          onLeaveRoom={handleLeaveRoom}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}