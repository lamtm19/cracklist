{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lamtm\\\\Downloads\\\\cracklist-web\\\\src\\\\components\\\\Lobby.js\",\n  _s = $RefreshSig$();\n// src/components/Lobby.js\nimport React, { useEffect, useState } from 'react';\nimport { db } from '../firebase';\nimport { collection, doc, onSnapshot, setDoc, addDoc, updateDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Lobby({\n  gameCode,\n  pseudo,\n  isHost\n}) {\n  _s();\n  const [players, setPlayers] = useState([]);\n  useEffect(() => {\n    const unsub = onSnapshot(collection(db, \"games\", gameCode, \"players\"), snapshot => {\n      const list = snapshot.docs.map(doc => doc.data().pseudo);\n      setPlayers(list);\n    });\n    const playerRef = doc(db, \"games\", gameCode, \"players\", pseudo);\n    setDoc(playerRef, {\n      pseudo\n    }, {\n      merge: true\n    });\n    return () => unsub();\n  }, [gameCode, pseudo]);\n  const handleStartGame = async () => {\n    await updateDoc(doc(db, \"games\", gameCode), {\n      started: true\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Lobby - Code : \", gameCode]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Joueurs connect\\xE9s :\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: players.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: p\n      }, p, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), isHost && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleStartGame,\n      style: {\n        marginTop: 20\n      },\n      children: \"Lancer la partie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(Lobby, \"X/Tdqu5+Xz4mrEJLe3+u4Igo5rg=\");\n_c = Lobby;\nexport default Lobby;\nvar _c;\n$RefreshReg$(_c, \"Lobby\");","map":{"version":3,"names":["React","useEffect","useState","db","collection","doc","onSnapshot","setDoc","addDoc","updateDoc","jsxDEV","_jsxDEV","Lobby","gameCode","pseudo","isHost","_s","players","setPlayers","unsub","snapshot","list","docs","map","data","playerRef","merge","handleStartGame","started","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","p","onClick","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/lamtm/Downloads/cracklist-web/src/components/Lobby.js"],"sourcesContent":["// src/components/Lobby.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { db } from '../firebase';\r\nimport { collection, doc, onSnapshot, setDoc, addDoc, updateDoc } from 'firebase/firestore';\r\n\r\nfunction Lobby({ gameCode, pseudo, isHost }) {\r\n  const [players, setPlayers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const unsub = onSnapshot(collection(db, \"games\", gameCode, \"players\"), (snapshot) => {\r\n      const list = snapshot.docs.map(doc => doc.data().pseudo);\r\n      setPlayers(list);\r\n    });\r\n\r\n    const playerRef = doc(db, \"games\", gameCode, \"players\", pseudo);\r\n    setDoc(playerRef, { pseudo }, { merge: true });\r\n\r\n    return () => unsub();\r\n  }, [gameCode, pseudo]);\r\n\r\n  const handleStartGame = async () => {\r\n    await updateDoc(doc(db, \"games\", gameCode), {\r\n      started: true\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h2>Lobby - Code : {gameCode}</h2>\r\n      <p>Joueurs connect√©s :</p>\r\n      <ul>\r\n        {players.map((p) => (\r\n          <li key={p}>{p}</li>\r\n        ))}\r\n      </ul>\r\n\r\n      {isHost && (\r\n        <button onClick={handleStartGame} style={{ marginTop: 20 }}>\r\n          Lancer la partie\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lobby;\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,EAAE,QAAQ,aAAa;AAChC,SAASC,UAAU,EAAEC,GAAG,EAAEC,UAAU,EAAEC,MAAM,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5F,SAASC,KAAKA,CAAC;EAAEC,QAAQ;EAAEC,MAAM;EAAEC;AAAO,CAAC,EAAE;EAAAC,EAAA;EAC3C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACd,MAAMkB,KAAK,GAAGb,UAAU,CAACF,UAAU,CAACD,EAAE,EAAE,OAAO,EAAEU,QAAQ,EAAE,SAAS,CAAC,EAAGO,QAAQ,IAAK;MACnF,MAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAClB,GAAG,IAAIA,GAAG,CAACmB,IAAI,CAAC,CAAC,CAACV,MAAM,CAAC;MACxDI,UAAU,CAACG,IAAI,CAAC;IAClB,CAAC,CAAC;IAEF,MAAMI,SAAS,GAAGpB,GAAG,CAACF,EAAE,EAAE,OAAO,EAAEU,QAAQ,EAAE,SAAS,EAAEC,MAAM,CAAC;IAC/DP,MAAM,CAACkB,SAAS,EAAE;MAAEX;IAAO,CAAC,EAAE;MAAEY,KAAK,EAAE;IAAK,CAAC,CAAC;IAE9C,OAAO,MAAMP,KAAK,CAAC,CAAC;EACtB,CAAC,EAAE,CAACN,QAAQ,EAAEC,MAAM,CAAC,CAAC;EAEtB,MAAMa,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,MAAMlB,SAAS,CAACJ,GAAG,CAACF,EAAE,EAAE,OAAO,EAAEU,QAAQ,CAAC,EAAE;MAC1Ce,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC;EAED,oBACEjB,OAAA;IAAKkB,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAG,CAAE;IAAAC,QAAA,gBAC1BpB,OAAA;MAAAoB,QAAA,GAAI,iBAAe,EAAClB,QAAQ;IAAA;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAClCxB,OAAA;MAAAoB,QAAA,EAAG;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAC1BxB,OAAA;MAAAoB,QAAA,EACGd,OAAO,CAACM,GAAG,CAAEa,CAAC,iBACbzB,OAAA;QAAAoB,QAAA,EAAaK;MAAC,GAALA,CAAC;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CACpB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,EAEJpB,MAAM,iBACLJ,OAAA;MAAQ0B,OAAO,EAAEV,eAAgB;MAACE,KAAK,EAAE;QAAES,SAAS,EAAE;MAAG,CAAE;MAAAP,QAAA,EAAC;IAE5D;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CACT;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACnB,EAAA,CAtCQJ,KAAK;AAAA2B,EAAA,GAAL3B,KAAK;AAwCd,eAAeA,KAAK;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}